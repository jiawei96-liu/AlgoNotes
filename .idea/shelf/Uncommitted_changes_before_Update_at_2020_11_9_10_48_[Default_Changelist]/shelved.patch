Index: app/src/main/res/layout/activity_app_usage.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/iv_icon_single\"\r\n                android:layout_width=\"120dp\"\r\n                android:layout_height=\"120dp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"vertical\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:background=\"@drawable/selector_white\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/txt_app_name_single\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center_vertical\"\r\n                    android:layout_marginTop=\"3dp\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/txt_app_version_single\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center_vertical\"\r\n                    android:layout_marginTop=\"3dp\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/txt_app_size_single\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center_vertical\"\r\n                    android:layout_marginTop=\"3dp\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/txt_app_package_name_single\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center_vertical\"\r\n                    android:layout_marginTop=\"3dp\"\r\n                    android:textSize=\"15dp\" />\r\n            </LinearLayout>\r\n\r\n        </LinearLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/txt_app_dir_single\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:textSize=\"15dp\"\r\n            android:background=\"@drawable/selector_orange\"/>\r\n        <TextView\r\n            android:id=\"@+id/txt_app_time_usage_single\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:textSize=\"15dp\"\r\n            android:background=\"@drawable/selector_blue\"/>\r\n    </LinearLayout>\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_app_usage.xml	(revision 20b8bcee99a8d96f6bc3f60179847ccfb6585f20)
+++ app/src/main/res/layout/activity_app_usage.xml	(date 1604666885699)
@@ -25,8 +25,7 @@
                 android:layout_height="match_parent"
                 android:orientation="vertical"
                 android:layout_marginLeft="10dp"
-                android:layout_marginTop="15dp"
-                android:background="@drawable/selector_white">
+                android:background="@drawable/selector_blue">
 
                 <TextView
                     android:id="@+id/txt_app_name_single"
@@ -60,9 +59,12 @@
                     android:layout_marginTop="3dp"
                     android:textSize="15dp" />
             </LinearLayout>
-
         </LinearLayout>
-
+        <View
+            android:layout_marginTop="10dp"
+            android:layout_width="match_parent"
+            android:layout_height="10px"
+            android:background="@drawable/ic_dashboard_black_24dp"/>
         <TextView
             android:id="@+id/txt_app_dir_single"
             android:layout_width="match_parent"
Index: app/src/main/java/com/software/ustc/superspy/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.software.ustc.superspy;\r\n\r\nimport android.app.usage.ConfigurationStats;\r\nimport android.app.usage.EventStats;\r\nimport android.app.usage.UsageStats;\r\nimport android.app.usage.UsageStatsManager;\r\nimport android.content.Context;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.software.ustc.superspy.kits.ActivityCollector;\r\nimport com.software.ustc.superspy.kits.AppUsageUtil;\r\nimport com.software.ustc.superspy.kits.BaseActivity;\r\n\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\nimport androidx.navigation.ui.AppBarConfiguration;\r\nimport androidx.navigation.ui.NavigationUI;\r\n\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends BaseActivity {\r\n\r\n    private final static String TAG = \"MainActivity\";\r\n\r\n    private Context mContext;\r\n    private UsageStatsManager mUsageStatsManager;\r\n    private long mCurrentTime;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        BottomNavigationView navView = findViewById(R.id.nav_view);\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        AppBarConfiguration appBarConfiguration = new AppBarConfiguration.Builder(\r\n                R.id.navigation_home, R.id.navigation_dashboard, R.id.navigation_notifications)\r\n                .build();\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);\r\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);\r\n        NavigationUI.setupWithNavController(navView, navController);\r\n\r\n        //权限检查\r\n        mContext = this;\r\n        AppUsageUtil.checkUsageStateAccessPermission(mContext);\r\n        mUsageStatsManager = (UsageStatsManager) getSystemService(USAGE_STATS_SERVICE);\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        mCurrentTime = System.currentTimeMillis();\r\n        if(mUsageStatsManager != null) {\r\n            queryUsageStats();\r\n            queryConfigurations();\r\n            queryEventStats();\r\n            AppUsageUtil.getTopActivityPackageName(mContext);\r\n        }\r\n\r\n    }\r\n\r\n    private void queryUsageStats() {\r\n        List<UsageStats> usageStatsList = mUsageStatsManager.queryUsageStats(\r\n                UsageStatsManager.INTERVAL_DAILY, mCurrentTime - 60 * 1000, mCurrentTime);\r\n        for(UsageStats usageStats: usageStatsList) {\r\n            Log.d(TAG,\"usageStats PackageName = \" + usageStats.getPackageName() + \" , FirstTimeStamp = \"\r\n                    + usageStats.getFirstTimeStamp() + \" , LastTimeStamp = \" + usageStats.getLastTimeStamp()\r\n                    + \", LastTimeUsed = \" + usageStats.getLastTimeUsed()\r\n                    + \" , TotalTimeInForeground = \" + usageStats.getTotalTimeInForeground());\r\n        }\r\n    }\r\n\r\n    private void queryConfigurations() {\r\n        List<ConfigurationStats> configurationStatsList = mUsageStatsManager.queryConfigurations(\r\n                UsageStatsManager.INTERVAL_DAILY,mCurrentTime - 60 * 1000, mCurrentTime);\r\n        for (ConfigurationStats configurationStats:configurationStatsList) {\r\n            Log.d(TAG,\"configurationStats Configuration = \" + configurationStats.getConfiguration() + \" , ActivationCount = \" + configurationStats.getActivationCount()\r\n                    + \" , FirstTimeStamp = \" + configurationStats.getFirstTimeStamp() + \" , LastTimeStamp = \" + configurationStats.getLastTimeStamp()\r\n                    + \" , LastTimeActive = \" + configurationStats.getLastTimeActive() + \" , TotalTimeActive = \" + configurationStats.getTotalTimeActive());\r\n        }\r\n    }\r\n\r\n    private void queryEventStats() {\r\n        if (android.os.Build.VERSION.SDK_INT >= 28) {\r\n            List<EventStats> eventStatsList = mUsageStatsManager.queryEventStats(\r\n                    UsageStatsManager.INTERVAL_DAILY,mCurrentTime - 60 * 1000,mCurrentTime);\r\n            for(EventStats eventStats:eventStatsList) {\r\n                Log.d(TAG,\"eventStats EventType\" + eventStats.getEventType() + \" , Count = \" + eventStats.getCount()\r\n                        + \" , FirstTime = \" + eventStats.getFirstTimeStamp() + \" , LastTime = \" + eventStats.getLastTimeStamp()\r\n                        + \" , LastEventTime = \" + eventStats.getLastEventTime() + \" , TotalTime = \" + eventStats.getTotalTime());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        ActivityCollector.finishAll();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/software/ustc/superspy/MainActivity.java	(revision 20b8bcee99a8d96f6bc3f60179847ccfb6585f20)
+++ app/src/main/java/com/software/ustc/superspy/MainActivity.java	(date 1604654675302)
@@ -86,7 +86,7 @@
             List<EventStats> eventStatsList = mUsageStatsManager.queryEventStats(
                     UsageStatsManager.INTERVAL_DAILY,mCurrentTime - 60 * 1000,mCurrentTime);
             for(EventStats eventStats:eventStatsList) {
-                Log.d(TAG,"eventStats EventType" + eventStats.getEventType() + " , Count = " + eventStats.getCount()
+                Log.d(TAG,"queryEventStats" + eventStats.getEventType() + " , Count = " + eventStats.getCount()
                         + " , FirstTime = " + eventStats.getFirstTimeStamp() + " , LastTime = " + eventStats.getLastTimeStamp()
                         + " , LastEventTime = " + eventStats.getLastEventTime() + " , TotalTime = " + eventStats.getTotalTime());
             }
